<html>
    <head>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript" src="data.json"></script>
        <script type="text/javascript">
         google.charts.load('current', {'packages':['timeline']});
         
         google.charts.setOnLoadCallback(drawChart);
         function drawChart() {
             var container = document.getElementById('timeline');
             var chart = new google.visualization.Timeline(container);

             var dt = mkDataTable(chart, data);
             chart.draw(dt);
         }

         function mkDataTable(chart, rows) {
             var dataTable = new google.visualization.DataTable();
             google.visualization.events.addListener(chart, 'select', selectHandler);
             function selectHandler() {
                 var i = chart.getSelection()[0].row;
                 console.log(i);

                 var dt = mkDataTable(chart, [
                     ['Atom 0', 'FRAM: evaluate Reg "a" ["b"]', null, new Date(0), new Date(0)],
                     ['Atom 1', 'FRAM: map Reg "a" ["b"] on 0', null, new Date(0), new Date(0)],
                     ['Atom 2', 'Push "a"', null, new Date(0), new Date(2)],
                     ['Atom 3', 'signal: Load 0', null, new Date(0), new Date(2)],
                     ['Atom 4', 'Pull ["b"]', null, new Date(2), new Date(14)],
                     ['Atom 7', 'Reg "a" ["b"]', null, new Date(0), new Date(14)],
                 ]);
                 chart.draw(dt);

             }
             dataTable.addColumn({ type: 'string', id: 'Term' });
             dataTable.addColumn({ type: 'string', id: 'Name' });
             dataTable.addColumn({ type: 'string', role: 'tooltip' });
             dataTable.addColumn({ type: 'date', id: 'Start' });
             dataTable.addColumn({ type: 'date', id: 'End' });
             dataTable.addRows(rows);
             return dataTable;
         }
        </script>
    </head>
    <body>
        <div id="timeline" style="height: 100%;" ></div>
    </body>
</html>
