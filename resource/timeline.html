<!-- <!DOCTYPE HTML>
     <html>
     <head>
     <title>Timeline | Basic demo</title>

     <style type="text/css">
     body, html {
     font-family: sans-serif;
     }
     </style>
     <script type="text/javascript" src="data.json"></script>        
     <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
     <script src="vendor/vis.min.js"></script>
     <link href="vendor/vis.min.css" rel="stylesheet" type="text/css" />
     </head>
     <body>
     <div id="visualization"></div>

     <script type="text/javascript">
     // DOM element where the Timeline will be attached
     var container = document.getElementById('visualization');


     // Create a DataSet (allows two way data-binding)
     var groups = new vis.DataSet(groups_data);
     var items = new vis.DataSet(items_data);

     // Configuration for the Timeline
     var options = {
     groupOrder: 'content'
     };

     // Create a Timeline
     var timeline = new vis.Timeline(container, items, options);
     </script>
     </body>
     </html>
   -->










<!DOCTYPE HTML>
<html>
    <head>
        <title>Timeline | Nested Groups example</title>

        <style>
         body, html {
             font-family: arial, sans-serif;
             font-size: 11pt;
         }

         #visualization {
             box-sizing: border-box;
             width: 100%;
             height: 300px;
         }
        </style>

        <script type="text/javascript" src="data.json"></script>

        <script src="vendor/vis.min.js"></script>
        <link href="vendor/vis.min.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="visualization"></div>

        <script>
         // create a data set with groups
         var groups = new vis.DataSet(groups_data);

         var items = new vis.DataSet(items_data);
         var items_dict = {};
         var time_end = 0;
         var original_length = items_data.length;
         for (var i = 0; i < original_length; i += 1) {
             if (items_data[i].end > time_end) time_end = items_data[i].end;
             if (items_data[i].inside_out) {
                 item = items_data[i];
                 var a = {};
                 var b = {};
                 Object.keys(item).forEach(function (key) {
                     a[key] = item[key];
                     b[key] = item[key];
                 });
                 a.inside_out = false;
                 b.inside_out = false;
                 a.id += 0.1;
                 b.id += 0.2;
                 a.start = 0;
                 a.end = item.start + 1;
                 b.start = item.end - 1;
                 b.end = time_end; // incorrect value, fix after current for
                 items_data[i] = a;
                 items_data.push(b);
             }
             items_dict[items_data[i].id] = items_data[i];
         }
         for (; i < items_data.length; i += 1) {
             items_data[i].end = time_end;
             items_dict[items_data[i].id] = items_data[i];
         }
         
         
         // create visualization
         var container = document.getElementById('visualization');
         var options = {
             groupOrder: 'content',  // groupOrder can be a property name or a sorting function
             timeAxis: {scale: 'millisecond', step: 1}
         };

         var timeline = new vis.Timeline(container, items, groups, options);
         timeline.setItems(new vis.DataSet(items_data));

         timeline.on('select', function (prop) {
             var item = prop.items[0].toFixed();

             for (var i = 0; i < items_data.length; i += 1) {
                 if (items_data[i].id.toFixed() == item) {
                     items_data[i].style = "background-color: Salmon;";
                 } else {
                     items_data[i].style = undefined;
                 }
             }

             for (var i = 0; i < relations_data.length; i += 1) {
                 var rel = relations_data[i];
                 if (rel.type == "Vertical") {
                     if (rel.a == item) {
                         if (rel.b in items_dict) {
                             items_dict[rel.b].style = "background-color: Chartreuse;";
                         } else {
                             items_dict[rel.b + 0.1].style = "background-color: Chartreuse;";
                             items_dict[rel.b + 0.2].style = "background-color: Chartreuse;";
                         }
                     } else if (rel.b == item) {
                         if (rel.a in items_dict) {
                             items_dict[rel.a].style = "background-color: SkyBlue;";
                         } else {
                             items_dict[rel.a + 0.1].style = "background-color: SkyBlue;";
                             items_dict[rel.a + 0.2].style = "background-color: SkyBlue;";
                         }
                     }
                 }
             }

             timeline.setItems(new vis.DataSet(items_data));
         });
        </script>
    </body>
</html>
